$(document).ready(function(){function t(){function t(){for(var t=$(".carousel .carousel-inner"),e=$(".carousel .item"),i=0,o=0;o<e.length;o++)i<$(e[o]).height()&&(i=$(e[o]).height());t.height(i+"px")}console.log("preparing my carousel...");var e=$("img[preload-src]").map(function(e,i){var o=$.Deferred(),n=$(i),r=new Image;return r.onload=function(){n.attr("src",r.src),t(),o.resolve(e)},r.src=n.attr("preload-src"),o});$.when.apply(null,e.get()).then(function(){});var i=$(".carousel .carousel-inner");i.height(i.height()+"px"),$(".carousel .item").each(function(){var t=$(this);t.css("width",t.closest(".carousel").width()+"px").css("float","left").css("position","absolute")}),$(".carousel .nav-bar .prev").click(function(){if(!o){o=!0;var t=$(this).closest(".carousel"),e=t.find(".item.active"),i=e.prev(".item");i.addClass("active").css("margin-left","-100%"),i.length<=0&&(i=t.find(".item").last(),i.addClass("active").css("margin-left","-200%")),e.animate({"margin-left":"100%"},function(){e.removeClass("active"),e.css("margin-left",0),i.animate({"margin-left":0},function(){o=!1})})}});var o=!1;$(".carousel .nav-bar .next").click(function(){if(!o){o=!0;var t=$(this).closest(".carousel"),e=t.find(".item.active"),i=e.next(".item");i.length<=0&&(i=t.find(".item:first-child")),i.addClass("active").css("margin-left","100%"),e.animate({"margin-left":"-100%"},function(){e.removeClass("active"),e.css("margin-left",0),i.animate({"margin-left":0},function(){o=!1})})}})}t(),$(document).on("pjax/done",function(){setTimeout(t,100)})}),!function(){function t(t,e){$(t).children().each(function(){var t=$(this);t.attr("data-group")&&t.attr("data-group")!==e?t.hide():t.show()})}$(document).on("show_content",function(e,i,o){t(".group-description",o),t(".carousel-items",o),t(".services",o)})}(),$(document).ready(function(){function t(){$(".mask .text").each(function(){function t(){e.css("width",i[0].width+"px"),e.css("min-height",i[0].height+"px")}var e=$(this),i=e.next(".image");t(),i.load(t)}),$(".mask .close.button").click(function(){var t=$(this).closest(".mask");t.hide();var e=t.find("video");e.length&&e[0].pause()}),$(".mask").css("background-color","rgba(0, 0, 0, 0.4)").css("padding-left",0).hide(),$(".mask.darker").css("background-color","rgba(0, 0, 0, 0.8)"),console.log("hided modals: ",$(".mask").length),$("[data-modal-selector]").on("click",function(t){var e=$(this),i=e.attr("data-modal-selector"),o=$(i);o.css("display","flex"),t.stopPropagation()}),console.log("modals prepared.")}t(),$(document).on("pjax/done",function(){setTimeout(t,100)}),window.modals={prepare:t}});var vmvideos=[{author:"yasudatakahiro",title:'"COPY" Official Videoclip',thumb:"http://i.vimeocdn.com/video/291709093_200x150.jpg",url:"http://vimeo.com/17902560"},{author:"Ground's Oranges",title:"Prefunerale Luigi Virgillito",thumb:"http://i.vimeocdn.com/video/447164694_200x150.jpg",url:"http://vimeo.com/73141804"},{author:"Mr. Kaplin",title:'Official Release: Toob "Wavaphon" Music Video',thumb:"http://i.vimeocdn.com/video/281268872_200x150.jpg",url:"http://vimeo.com/40648169"},{author:"BKWLD",title:"BKWLD in a matter of seconds",thumb:"http://i.vimeocdn.com/video/245832886_200x150.jpg",url:"http://vimeo.com/24933302"},{author:"dunun",title:"amalgamation",thumb:"http://i.vimeocdn.com/video/218886754_200x150.jpg",url:"http://vimeo.com/32351411"},{author:"Nexus",title:"Avocado Go Green",thumb:"http://i.vimeocdn.com/video/454456291_200x150.jpg",url:"http://vimeo.com/78830727"},{author:"Trunk Animation",title:'Major Lazer- "Keep It Goin Louder"',thumb:"http://i.vimeocdn.com/video/310360546_200x150.jpg",url:"http://vimeo.com/6793510"},{author:"Chris Harmon",title:"Oil'd",thumb:"http://i.vimeocdn.com/video/146641111_200x150.jpg",url:"http://vimeo.com/22655744"},{author:"Bet She'an Team",title:"Bet She'an",thumb:"http://i.vimeocdn.com/video/451945429_200x150.jpg",url:"http://vimeo.com/76920679"},{author:"Louis Paquet",title:"Forrest Gump by Wes Anderson",thumb:"http://i.vimeocdn.com/video/472143478_200x150.jpg",url:"http://vimeo.com/92419083"},{author:"2veinte",title:"For Agile Films by 2veinte",thumb:"http://i.vimeocdn.com/video/472472892_200x150.jpg",url:"http://vimeo.com/92679978"},{author:"CypherAudio",title:"Hershey's - 'Happiness Is...'",thumb:"http://i.vimeocdn.com/video/27938399_200x150.jpg",url:"http://vimeo.com/6909738"},{author:"beeple",title:"instrumental video nine",thumb:"http://i.vimeocdn.com/video/453513252_200x150.jpg",url:"http://vimeo.com/9800754"},{author:"Jean Barnezet",title:"Ed bangers Vol 2",thumb:"http://i.vimeocdn.com/video/53821679_200x150.jpg",url:"http://vimeo.com/935862"},{author:"Moop Jaw",title:"Qua - Goodmorning Sun music video (Directed by Antuong Nguyen)",thumb:"http://i.vimeocdn.com/video/17354912_200x150.jpg",url:"http://vimeo.com/5375940"},{author:"Takuya Hosogane",title:"Takuya Hosogane MotionReel 2011",thumb:"http://i.vimeocdn.com/video/135868475_200x150.jpg",url:"http://vimeo.com/21151968"},{author:"James Curran",title:"The Adventures of Tintin",thumb:"http://i.vimeocdn.com/video/204191730_200x150.jpg",url:"http://vimeo.com/30402976"},{author:"johan rijpma",title:"Tape Generations",thumb:"http://i.vimeocdn.com/video/192629425_200x150.jpg",url:"http://vimeo.com/28826269"},{author:"Royale",title:"Oreo Wonderfilled",thumb:"http://i.vimeocdn.com/video/437477845_200x150.jpg",url:"http://vimeo.com/66116612"},{author:"Tomas Nilsson",title:"Slagsmålsklubben - Sponsored by destiny",thumb:"http://i.vimeocdn.com/video/3773075_200x150.jpg",url:"http://vimeo.com/3514904"},{author:"Mothlight Creative",title:"Motion Design Reel",thumb:"http://i.vimeocdn.com/video/21020441_200x150.jpg",url:"http://vimeo.com/2354896"},{author:"Jr.canest",title:"Resonance: The Interpreter's House",thumb:"http://i.vimeocdn.com/video/165696168_200x150.jpg",url:"http://vimeo.com/25181651"},{author:"Hardy Seiler",title:"Where things come from",thumb:"http://i.vimeocdn.com/video/279551535_200x150.jpg",url:"http://vimeo.com/40459347"},{author:"rich nosworthy",title:"Unified",thumb:"http://i.vimeocdn.com/video/440983567_200x150.jpg",url:"http://vimeo.com/68596504"},{author:"Onesize",title:"FITC Amsterdam 2013 titles.",thumb:"http://i.vimeocdn.com/video/416466859_200x150.jpg",url:"http://vimeo.com/59892998"},{author:"THE CREATIVE INFLUENCE",title:"Jessica Walsh & Stefan Sagmeister _ The Creative Influence: Ep. 2",thumb:"http://i.vimeocdn.com/video/458287788_200x150.jpg",url:"http://vimeo.com/58575990"},{author:"Ian Albinson",title:"A Brief History of Title Design",thumb:"http://i.vimeocdn.com/video/317160247_200x150.jpg",url:"http://vimeo.com/20759580"},{author:"Fraser Davidson",title:"Bill Maher - Irritable Bowl Syndrome",thumb:"http://i.vimeocdn.com/video/439126226_200x150.jpg",url:"http://vimeo.com/35003246"},{author:"rob kent",title:"casino royale intro 720p",thumb:"http://i.vimeocdn.com/video/430824864_200x150.jpg",url:"http://vimeo.com/61960054"},{author:"Danil Krivoruchko",title:"Intel Fashion show | Intro loop",thumb:"http://i.vimeocdn.com/video/168467700_200x150.jpg",url:"http://vimeo.com/25573104"},{author:"Mr OIZO / Q.DUPIEUX",title:"OIZO MOUSTACHE SPECIAL ANNOUNCEMENT",thumb:"http://i.vimeocdn.com/video/109481237_200x150.jpg",url:"http://vimeo.com/17583401"},{author:"Animography",title:"Isotype - Animated Typeface",thumb:"http://i.vimeocdn.com/video/445957950_200x150.jpg",url:"http://vimeo.com/71962920"},{author:"Yannick Jacquet (Legoman)",title:"Mécaniques Discursives [work in progress] 2",thumb:"http://i.vimeocdn.com/video/268346538_200x150.jpg",url:"http://vimeo.com/38945809"},{author:"Tektosag Records",title:"Blawan - Fram (Video Edit)",thumb:"http://i.vimeocdn.com/video/75218953_200x150.jpg",url:"http://vimeo.com/13177771"},{author:"Fabricio Lima",title:"30 things at 30",thumb:"http://i.vimeocdn.com/video/432436026_200x150.jpg",url:"http://vimeo.com/62509176"},{author:"SoLab",title:"Hermès x Man on the Move by Romain Laurent",thumb:"http://i.vimeocdn.com/video/472009665_200x150.jpg",url:"http://vimeo.com/91405458"},{author:"Buck",title:"Umbro Blackout",thumb:"http://i.vimeocdn.com/video/174298706_200x150.jpg",url:"http://vimeo.com/26397024"},{author:"Neal Coghlan",title:"BIRDMASK Visuals",thumb:"http://i.vimeocdn.com/video/348590012_200x150.jpg",url:"http://vimeo.com/50071433"},{author:"Machine Molle",title:"ROYKSOPP / Remind Me / Music Video (2002)",thumb:"http://i.vimeocdn.com/video/204044099_200x150.jpg",url:"http://vimeo.com/30372022"},{author:"POCKO",title:"BEN PEARCE - TED Metaphors Excerpt 1",thumb:"http://i.vimeocdn.com/video/437584087_200x150.jpg",url:"http://vimeo.com/66253104"},{author:"finally.",title:"Understand Music",thumb:"http://i.vimeocdn.com/video/380549046_200x150.jpg",url:"http://vimeo.com/54763818"},{author:"dlew",title:"Flying Lotus - Tiny Tortures",thumb:"http://i.vimeocdn.com/video/377516992_200x150.jpg",url:"http://vimeo.com/54585743"},{author:"Berkanism",title:"NATURAL FIGHT (Find Perfect Shape)",thumb:"http://i.vimeocdn.com/video/286755621_200x150.jpg",url:"http://vimeo.com/41405220"},{author:"Sunday Paper",title:"Light",thumb:"http://i.vimeocdn.com/video/191510392_200x150.jpg",url:"http://vimeo.com/28685926"},{author:"weareflink",title:"Volkswagen - People's Car Project - Parking",thumb:"http://i.vimeocdn.com/video/196212132_200x150.jpg",url:"http://vimeo.com/29308144"},{author:"Giant Ant",title:"WIRED // What's Inside: Play-Doh (Director's Cut)",thumb:"http://i.vimeocdn.com/video/445546104_200x150.jpg",url:"http://vimeo.com/71841985"},{author:"Golden Wolf",title:"Adidas - #ALLINFORMURRAY",thumb:"http://i.vimeocdn.com/video/445698928_200x150.jpg",url:"http://vimeo.com/71976695"},{author:"A N F",title:"Egyptrixx - Start from the Beginning",thumb:"http://i.vimeocdn.com/video/259770961_200x150.jpg",url:"http://vimeo.com/16660444"},{author:"Plenty",title:"HBO Latinoamerica - Reel",thumb:"http://i.vimeocdn.com/video/450870325_200x150.jpg",url:"http://vimeo.com/76084225"},{author:"malika favre",title:"TOTO Perfect Day",thumb:"http://i.vimeocdn.com/video/437778164_200x150.jpg",url:"http://vimeo.com/66386720"}],additionInfo=[[{url:"/bower/bridgeplus_ui/public/images/CORPORATE_PG.png",width:460,height:102,x:600,y:120},{url:"/bower/bridgeplus_ui/public/images/CORPORATE.png",width:123,height:41,x:739,y:220}],[{url:"/bower/bridgeplus_ui/public/images/MENTOR_PG.png",width:245,height:183,x:677.5,y:110},{url:"/bower/bridgeplus_ui/public/images/MENTOR.png",width:123,height:41,x:739,y:290}],[{url:"/bower/bridgeplus_ui/public/images/STUDENT_PG.png",width:446,height:207,x:620,y:200},{url:"/bower/bridgeplus_ui/public/images/STUDENT.png",width:123,height:41,x:739,y:360}]];$(function(){function t(){u.currentW=$(window).width(),u.currentH=$(window).height(),a=.5*u.currentW,c=.5*u.currentH}function e(){u.currentH/780}function i(t){var e=[];return t.classList&&"function"==typeof t.classList.forEach?t.classList.forEach(function(t){e.push(t)}):e=(t.getAttribute("class")||"").split(" "),e}function o(){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);console.log(t);var e=$(".to-top").outerHeight();console.log(e);var i=$("#footer").outerHeight();console.log(i);var o=t-e-i;console.log(o),$("#index-footer").parent().height(o)}function n(){$(".owl-carousel").owlCarousel({items:1,lazyLoad:!0,loop:!0,autoplayTimeout:8e3,autoplayHoverPause:!0,nav:!0,navRewind:!0,smartSpeed:500,navText:['<i class="" style="font-family: cursive;">&lt;</i>','<i class="" style="font-family: cursive;">&gt;</i>'],autoHeight:!0})}function r(){o(),setTimeout(n,500)}var a,c,u={currentW:0,currentH:0};!function(){function t(){function t(){var e=n.clone().attr({r:r,opacity:0,fill:"none","stroke-width":1});return e.attr({opacity:1}).animate({r:r+10,"stroke-width":41,stroke:"#FFF"},1e3,">",function(){}),r+=40,a+150>r?void setTimeout(t,50):($("#logo").addClass("active"),$(".logo_top").addClass("active"),void setTimeout(function(){BridgeWheel.start()},500))}var e=this.intro=new Raphael("bridge_plus_intro",u.currentW,u.currentH),o=e.path("M 0,"+u.currentH+" L 0,"+u.currentH).attr({fill:"#E71E30",stroke:"#E71E30","stroke-width":4}),n=e.circle(a,c,0).attr({fill:"#111",stroke:"#111"});o.animate({path:"M 0,"+u.currentH+" L "+a+","+c},1e3,">",function(){i.arcouno(),o.animate({path:"M "+a+","+c+"L "+a+","+c},1e3,">",function(){}),n.animate({r:"72"},1800,">",function(){}),setTimeout(t,1100)});var r=0}function e(){var t=i.intro.path(i.arc([a,c],120,120,320)).attr({stroke:"#111","stroke-width":1});t.attr({transform:"r0,"+a+","+c}).animate({transform:"r360,"+a+","+c},4e3)}var i=window.INTRO={intro:null,init:t,arcouno:e,arc:function(t,e,i,o){for(var n=i,r=this.toCoords(t,e,n),a="M "+r[0]+" "+r[1];o>=n;)r=this.toCoords(t,e,n),a+=" L "+r[0]+" "+r[1],n++;return a},toCoords:function(t,e,i){var o=i/180*Math.PI,n=t[0]+Math.cos(o)*e,r=t[1]+Math.sin(o)*e;return[n,r]}}}(),function(){var t=window.BridgeWheel={first:!0,sourceArr:[],imgAll:[],init:function(){INTRO.init()},evHandlers:function(){},start:function(){t.resize();var e=new Raphael("bridge_plus_wheel",2e3,1e3);e.wheel(440,vmvideos.slice(32,51),2,vmvideos,[],additionInfo)},resize:e}}(),$(window).on("resize",function(){t(),BridgeWheel.resize()});var s=$(".wheel_text"),l=$(".main_page_wheel"),h=$(".main_page_bottom"),m=$(".main_page_right");$(document).on("wheel/show",function(){$(".svg_group").hover(function(){$(document).trigger("show_group_desc",i(this))},function(){$(document).trigger("hide_group_desc",i(this))}).on("click",function(){var t,e=i(this);e.indexOf("svg_group_0")>=0&&(t="/portal/zh/student-portal"),e.indexOf("svg_group_1")>=0&&(t="/portal/zh/mentor-portal"),e.indexOf("svg_group_2")>=0&&(t="/portal/zh/hr-portal"),$(document).trigger("navigate",t)})}).on("click",".logo_right",function(){$(document).trigger("show_right")}).on("show_group_desc",function(t,e,i){s.hide().each(function(){$(this).hasClass(i)&&$(this).show()})}).on("hide_group_desc",function(t,e,i){s.each(function(){$(this).hasClass(i)&&$(this).hide()})}).on("show_wheel",function(){l.animate({top:0,left:0},500),h.animate({top:"100%",left:0},500),m.animate({left:"100%"},500)}).on("show_content",function(){l.animate({top:"-100%",left:0},500),h.animate({top:0,left:0},500),m.animate({left:"100%"},500),r()}).on("show_right",function(){l.animate({left:"-100%"},500),h.animate({left:"-100%"},500),m.animate({left:0},500)}).on("pjax/done",document,function(){$(document).trigger("show_content",null),"function"==typeof n&&setTimeout(n,100),"function"==typeof modals.prepare&&setTimeout(modals.prepare,100)}),t(),BridgeWheel.init(),BridgeWheel.evHandlers(),$(document).on("resize",r),0===location.pathname.indexOf("/portal/")&&$(document).trigger("show_content")}),$(document).ready(function(){var t=!1;$(".menu-button").click(function(){t?$(".menu").removeClass("active"):$(".menu").addClass("active"),t=!t}),$(document).on("show_right",function(){$("#pic-entrance").addClass("active")}).on("show_wheel",function(){$("#pic-entrance").removeClass("active")}).on("click",".left-arrow",function(){$(document).trigger("show_wheel")})}),!function(){function t(t,e,i,o,n){if(m.indexOf(t)>=0&&m.indexOf(e)>=0)return o;var r=h.indexOf(t),a=h.indexOf(e);return 0>r||0>a||r===a?i:a>r?o:n}function e(t){t.css({position:"absolute",left:"100%",right:"-100%"})}function i(t){t.animate({left:"-100%",right:"100%"},"slow",function(){t.remove()})}function o(t){return t.animate({left:"0",right:"0"},"slow",function(){t.css("position","relative")}).promise()}function n(t){t.css({position:"absolute",left:"-100%",right:"100%"})}function r(t){t.animate({left:"100%",right:"-100%"},"slow",function(){t.remove()})}function a(t,e){var i=document.createElement("div");i.innerHTML=t.innerHTML;var o=$(i),n=$(t);o.css({position:"absolute",left:"0",right:"0"}),o.insertBefore(n),e&&e(o,n)}function c(){$("#footer").css("position","fixed")}function u(){$("#footer").css("position","relative")}function s(t,n){c(),e(t),i(n),o(t).done(u)}function l(t,e){c(),n(t),r(e),o(t).done(u)}var h=["/portal/zh/about-us","/portal/zh/team","/portal/zh/video","/portal/zh/contact-us","/portal/zh/join-us"],m=["/portal/zh/student-portal","/portal/zh/mentor-portal","/portal/zh/hr-portal"];window.animationDirector={returnToOriginalPos:o,cloneOldSlide:a,getAnimation:t,slideToLeft:s,slideToRight:l}}(),$(function(){function t(t){d.push(t),d.length>5&&d.shift()}function e(t){g.push(t),g.length>5&&g.shift()}function i(t){f.push(t),f.length>5&&f.shift()}function o(t,e,i){r(e,i,function(){h.classList.add("hide"),setTimeout(function(){h.innerHTML=t,h.classList.remove("hide")},100)})}function n(){h=h||document.querySelector(".body"),m=m||document.querySelector("title")}function r(t,e,i){$(document).trigger("pjax/refresh"),n(),i(),c(e,t),$(document).trigger("pjax/done"),console.log("pjax/done")}function a(t,e,i){r(e,i,function(){animationDirector.cloneOldSlide(h,function(e,i){h.innerHTML=t,animationDirector.slideToLeft(i,e)})})}function c(t,e){Object.keys(t).forEach(function(e){h.setAttribute("data-"+e,t[e])}),m&&(m.innerHTML=e)}function u(t,e,i){r(e,i,function(){animationDirector.cloneOldSlide(h,function(e,i){h.innerHTML=t,v(i,e)})})}function s(t){for(var e={},i=t.length-1;i>=0;i--){var o=t[i];0==o.name.indexOf("data-")&&(e[o.name.slice(5)]=o.value)}return e}function l(n,r,a,c){$(document).trigger("pjax/start"),$.get(n,function(u){h=h||document.querySelector(".body"),m=m||document.querySelector("title"),p.innerHTML=u,a&&(history.pushState(n,"",n),t(h.innerHTML),e(s(h.attributes)),m&&i(m.innerHTML));var l=p.querySelector(".body"),d=p.querySelector("title");(c=c||o)(l.innerHTML,d&&d.innerHTML,s(l.attributes),r)})}var h,m,p=document.createElement("DIV"),d=[],g=[],f=[];document.addEventListener("click",function(t){if("A"!==t.target.nodeName)return!0;var e=location,i=t.target,n=i.href?i.href.toLowerCase():"";return"false"===i.getAttribute("use-pjax")||!n.length||"#"==n.charAt(0)||0==n.indexOf("mailto:")||0==n.indexOf("javascript:")||(t.preventDefault(),t.stopPropagation(),"/"===i.pathname?($(document).trigger("show_wheel"),history.pushState("/","","/"),!1):void l(n,i,!0,animationDirector.getAnimation(e.pathname,i.pathname,o,a,u)))},!1),window.addEventListener("popstate",function(){return d&&d.length?void o(d.pop(),f.pop(),g.pop()):void l(location.href)}),$(document).on("navigate",function(t,e){l(e,null,!0)});var v=animationDirector.slideToRight}),Raphael.fn.group=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","g");if(i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)"),i.classList)i.classList.add("svg_group"),i.classList.add(e);else{var o=(i.getAttribute("class")||"").split(" "),n=!1;-1==o.indexOf("svg_group")&&(o.push("svg_group"),n=!0),-1==o.indexOf(e)&&(o.push(e),n=!0),n&&i.setAttribute("class",o.join(" "))}if(t)for(var r=0,a=t.length;a>r;r++)i.appendChild(t[r].node);return this.canvas.appendChild(i),i},Raphael.fn.wheel=function(t,e,i,o,n,r){function a(){var t=d.image(this.src,690,w,x,j).attr({opacity:0});t.node.id=this.id,v.push(t),++f==g&&l()}function c(){var t=d.image("http://vlog.it/img/placeholder.jpg",690,w,x,j).attr({opacity:0});t.node.id=this.id,v.push(t),++f==g&&l()}function u(t,e){var i="M,800,500,L,862.3735072453278,206.5557197798583,A,300,300,0,0,0,737.6264927546722,206.5557197798583,z",o="M,800,500,L,844.8707740637095,274.419385507257,A,230,230,0,0,0,755.1292259362905,274.419385507257,z",n="M,800,500,L,835.6033494330103,344.0115340509082,A,160,160,0,0,0,764.3966505669897,344.0115340509082,z",r=[d.path(n).attr({stroke:"none"}),d.path(o).attr({stroke:"none"}),d.path(i).attr({stroke:"none"})],a=document.createElementNS(_,"clipPath");a.setAttribute("id","clip_ring"+t),a.appendChild(r[t].node),d.canvas.appendChild(a),e.forEach(function(e,i){var o=b*i;e.rotate(o,800,500),e.node.setAttribute("clip-path","url(#clip_ring"+t+")"),e.node.style.cursor="pointer",e.attr({opacity:0}),s(e,b,i)})}function s(t,e,i){t.attr({transform:"r"+e*i+",800,500t0,140"})}function l(){var t=[];r[r.length-(i+1)].forEach(function(e){var i=d.image(e.url,e.x,e.y,e.width,e.height).attr({opacity:1});i.node.classList.add("svg_group_addtion"),t.push(i)});var a;switch(i){case 2:a=300;break;case 1:a=230;break;case 0:a=160}var c=(a-100)/a;c=(100*c|0)/100;var s=d.circle(800,500,a).attr({fill:"#000",stroke:"none"});s.node.style.transform="scale("+c+","+c+")",d.group([t[0]].concat(v,s,t[1]),"svg_group_"+i),u(i,v),n.push(v),2==i?d.wheel(340,o.slice(15,31),1,e,n,r):1==i?d.wheel(240,o.slice(0,14),0,e,n,r):(h(),$(document).trigger("wheel/show"))}function h(){var t=360/14,e=n[2],i=e.length;e.forEach(function(o,n){n==i-1?o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){m(),e.forEach(function(e,i){e.animate({transform:"r"+(360+t*i)+",800,500"},3e4)})}):o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){})})}function m(){var t=22.5,e=n[1],i=e.length;e.forEach(function(o,n){n==i-1?o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){p(),e.forEach(function(e,i){e.animate({transform:"r"+(-360+t*i)+",800,500"},3e4)})}):o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){})})}function p(){var t=n[0],e=t.length,i=20;t.forEach(function(o,n){n==e-1?o.attr({opacity:1}).animate({transform:"r"+i*n+",800,500t0,0"},1e3,"<",function(){t.forEach(function(t,e){t.animate({transform:"r"+(360+i*e)+",800,500"},3e4)})}):o.attr({opacity:1}).animate({transform:"r"+i*n+",800,500t0,0"},1e3,"<",function(){})})}var d=this,g=e.length,f=0,v=[],b=360/g,w=340-70*i,_="http://www.w3.org/2000/svg",x=210,j=100;e.forEach(function(t){var e=new Image;e.onload=a,e.onerror=c,e.src=t.thumb,e.id=t.url,e.title=t.title,e.author=t.author})},$(document).ready(function(){function t(){function t(){for(var t=$(".carousel .carousel-inner"),e=$(".carousel .item"),i=0,o=0;o<e.length;o++)i<$(e[o]).height()&&(i=$(e[o]).height());t.height(i+"px")}console.log("preparing my carousel...");var e=$("img[preload-src]").map(function(e,i){var o=$.Deferred(),n=$(i),r=new Image;return r.onload=function(){n.attr("src",r.src),t(),o.resolve(e)},r.src=n.attr("preload-src"),o});$.when.apply(null,e.get()).then(function(){});var i=$(".carousel .carousel-inner");i.height(i.height()+"px"),$(".carousel .item").each(function(){var t=$(this);t.css("width",t.closest(".carousel").width()+"px").css("float","left").css("position","absolute")}),$(".carousel .nav-bar .prev").click(function(){if(!o){o=!0;var t=$(this).closest(".carousel"),e=t.find(".item.active"),i=e.prev(".item");i.addClass("active").css("margin-left","-100%"),i.length<=0&&(i=t.find(".item").last(),i.addClass("active").css("margin-left","-200%")),e.animate({"margin-left":"100%"},function(){e.removeClass("active"),e.css("margin-left",0),i.animate({"margin-left":0},function(){o=!1})})}});var o=!1;$(".carousel .nav-bar .next").click(function(){if(!o){o=!0;var t=$(this).closest(".carousel"),e=t.find(".item.active"),i=e.next(".item");i.length<=0&&(i=t.find(".item:first-child")),i.addClass("active").css("margin-left","100%"),e.animate({"margin-left":"-100%"},function(){e.removeClass("active"),e.css("margin-left",0),i.animate({"margin-left":0},function(){o=!1})})}})}t(),$(document).on("pjax/done",function(){setTimeout(t,100)})}),!function(){function t(t,e){$(t).children().each(function(){var t=$(this);t.attr("data-group")&&t.attr("data-group")!==e?t.hide():t.show()})}$(document).on("show_content",function(e,i,o){t(".group-description",o),t(".carousel-items",o),t(".services",o)})}(),$(document).ready(function(){function t(){$(".mask .text").each(function(){function t(){e.css("width",i[0].width+"px"),e.css("min-height",i[0].height+"px")}var e=$(this),i=e.next(".image");t(),i.load(t)}),$(".mask .close.button").click(function(){var t=$(this).closest(".mask");t.hide();var e=t.find("video");e.length&&e[0].pause()}),$(".mask").css("background-color","rgba(0, 0, 0, 0.4)").css("padding-left",0).hide(),$(".mask.darker").css("background-color","rgba(0, 0, 0, 0.8)"),console.log("hided modals: ",$(".mask").length),$("[data-modal-selector]").on("click",function(t){var e=$(this),i=e.attr("data-modal-selector"),o=$(i);o.css("display","flex"),t.stopPropagation()}),console.log("modals prepared.")}t(),$(document).on("pjax/done",function(){setTimeout(t,100)}),window.modals={prepare:t}});var vmvideos=[{author:"yasudatakahiro",title:'"COPY" Official Videoclip',thumb:"http://i.vimeocdn.com/video/291709093_200x150.jpg",url:"http://vimeo.com/17902560"},{author:"Ground's Oranges",title:"Prefunerale Luigi Virgillito",thumb:"http://i.vimeocdn.com/video/447164694_200x150.jpg",url:"http://vimeo.com/73141804"},{author:"Mr. Kaplin",title:'Official Release: Toob "Wavaphon" Music Video',thumb:"http://i.vimeocdn.com/video/281268872_200x150.jpg",url:"http://vimeo.com/40648169"},{author:"BKWLD",title:"BKWLD in a matter of seconds",thumb:"http://i.vimeocdn.com/video/245832886_200x150.jpg",url:"http://vimeo.com/24933302"},{author:"dunun",title:"amalgamation",thumb:"http://i.vimeocdn.com/video/218886754_200x150.jpg",url:"http://vimeo.com/32351411"},{author:"Nexus",title:"Avocado Go Green",thumb:"http://i.vimeocdn.com/video/454456291_200x150.jpg",url:"http://vimeo.com/78830727"},{author:"Trunk Animation",title:'Major Lazer- "Keep It Goin Louder"',thumb:"http://i.vimeocdn.com/video/310360546_200x150.jpg",url:"http://vimeo.com/6793510"},{author:"Chris Harmon",title:"Oil'd",thumb:"http://i.vimeocdn.com/video/146641111_200x150.jpg",url:"http://vimeo.com/22655744"},{author:"Bet She'an Team",title:"Bet She'an",thumb:"http://i.vimeocdn.com/video/451945429_200x150.jpg",url:"http://vimeo.com/76920679"},{author:"Louis Paquet",title:"Forrest Gump by Wes Anderson",thumb:"http://i.vimeocdn.com/video/472143478_200x150.jpg",url:"http://vimeo.com/92419083"},{author:"2veinte",title:"For Agile Films by 2veinte",thumb:"http://i.vimeocdn.com/video/472472892_200x150.jpg",url:"http://vimeo.com/92679978"},{author:"CypherAudio",title:"Hershey's - 'Happiness Is...'",thumb:"http://i.vimeocdn.com/video/27938399_200x150.jpg",url:"http://vimeo.com/6909738"},{author:"beeple",title:"instrumental video nine",thumb:"http://i.vimeocdn.com/video/453513252_200x150.jpg",url:"http://vimeo.com/9800754"},{author:"Jean Barnezet",title:"Ed bangers Vol 2",thumb:"http://i.vimeocdn.com/video/53821679_200x150.jpg",url:"http://vimeo.com/935862"},{author:"Moop Jaw",title:"Qua - Goodmorning Sun music video (Directed by Antuong Nguyen)",thumb:"http://i.vimeocdn.com/video/17354912_200x150.jpg",url:"http://vimeo.com/5375940"},{author:"Takuya Hosogane",title:"Takuya Hosogane MotionReel 2011",thumb:"http://i.vimeocdn.com/video/135868475_200x150.jpg",url:"http://vimeo.com/21151968"},{author:"James Curran",title:"The Adventures of Tintin",thumb:"http://i.vimeocdn.com/video/204191730_200x150.jpg",url:"http://vimeo.com/30402976"},{author:"johan rijpma",title:"Tape Generations",thumb:"http://i.vimeocdn.com/video/192629425_200x150.jpg",url:"http://vimeo.com/28826269"},{author:"Royale",title:"Oreo Wonderfilled",thumb:"http://i.vimeocdn.com/video/437477845_200x150.jpg",url:"http://vimeo.com/66116612"},{author:"Tomas Nilsson",title:"Slagsmålsklubben - Sponsored by destiny",thumb:"http://i.vimeocdn.com/video/3773075_200x150.jpg",url:"http://vimeo.com/3514904"},{author:"Mothlight Creative",title:"Motion Design Reel",thumb:"http://i.vimeocdn.com/video/21020441_200x150.jpg",url:"http://vimeo.com/2354896"},{author:"Jr.canest",title:"Resonance: The Interpreter's House",thumb:"http://i.vimeocdn.com/video/165696168_200x150.jpg",url:"http://vimeo.com/25181651"},{author:"Hardy Seiler",title:"Where things come from",thumb:"http://i.vimeocdn.com/video/279551535_200x150.jpg",url:"http://vimeo.com/40459347"},{author:"rich nosworthy",title:"Unified",thumb:"http://i.vimeocdn.com/video/440983567_200x150.jpg",url:"http://vimeo.com/68596504"},{author:"Onesize",title:"FITC Amsterdam 2013 titles.",thumb:"http://i.vimeocdn.com/video/416466859_200x150.jpg",url:"http://vimeo.com/59892998"},{author:"THE CREATIVE INFLUENCE",title:"Jessica Walsh & Stefan Sagmeister _ The Creative Influence: Ep. 2",thumb:"http://i.vimeocdn.com/video/458287788_200x150.jpg",url:"http://vimeo.com/58575990"},{author:"Ian Albinson",title:"A Brief History of Title Design",thumb:"http://i.vimeocdn.com/video/317160247_200x150.jpg",url:"http://vimeo.com/20759580"},{author:"Fraser Davidson",title:"Bill Maher - Irritable Bowl Syndrome",thumb:"http://i.vimeocdn.com/video/439126226_200x150.jpg",url:"http://vimeo.com/35003246"},{author:"rob kent",title:"casino royale intro 720p",thumb:"http://i.vimeocdn.com/video/430824864_200x150.jpg",url:"http://vimeo.com/61960054"},{author:"Danil Krivoruchko",title:"Intel Fashion show | Intro loop",thumb:"http://i.vimeocdn.com/video/168467700_200x150.jpg",url:"http://vimeo.com/25573104"},{author:"Mr OIZO / Q.DUPIEUX",title:"OIZO MOUSTACHE SPECIAL ANNOUNCEMENT",thumb:"http://i.vimeocdn.com/video/109481237_200x150.jpg",url:"http://vimeo.com/17583401"},{author:"Animography",title:"Isotype - Animated Typeface",thumb:"http://i.vimeocdn.com/video/445957950_200x150.jpg",url:"http://vimeo.com/71962920"},{author:"Yannick Jacquet (Legoman)",title:"Mécaniques Discursives [work in progress] 2",thumb:"http://i.vimeocdn.com/video/268346538_200x150.jpg",url:"http://vimeo.com/38945809"},{author:"Tektosag Records",title:"Blawan - Fram (Video Edit)",thumb:"http://i.vimeocdn.com/video/75218953_200x150.jpg",url:"http://vimeo.com/13177771"},{author:"Fabricio Lima",title:"30 things at 30",thumb:"http://i.vimeocdn.com/video/432436026_200x150.jpg",url:"http://vimeo.com/62509176"},{author:"SoLab",title:"Hermès x Man on the Move by Romain Laurent",thumb:"http://i.vimeocdn.com/video/472009665_200x150.jpg",url:"http://vimeo.com/91405458"},{author:"Buck",title:"Umbro Blackout",thumb:"http://i.vimeocdn.com/video/174298706_200x150.jpg",url:"http://vimeo.com/26397024"},{author:"Neal Coghlan",title:"BIRDMASK Visuals",thumb:"http://i.vimeocdn.com/video/348590012_200x150.jpg",url:"http://vimeo.com/50071433"},{author:"Machine Molle",title:"ROYKSOPP / Remind Me / Music Video (2002)",thumb:"http://i.vimeocdn.com/video/204044099_200x150.jpg",url:"http://vimeo.com/30372022"},{author:"POCKO",title:"BEN PEARCE - TED Metaphors Excerpt 1",thumb:"http://i.vimeocdn.com/video/437584087_200x150.jpg",url:"http://vimeo.com/66253104"},{author:"finally.",title:"Understand Music",thumb:"http://i.vimeocdn.com/video/380549046_200x150.jpg",url:"http://vimeo.com/54763818"},{author:"dlew",title:"Flying Lotus - Tiny Tortures",thumb:"http://i.vimeocdn.com/video/377516992_200x150.jpg",url:"http://vimeo.com/54585743"},{author:"Berkanism",title:"NATURAL FIGHT (Find Perfect Shape)",thumb:"http://i.vimeocdn.com/video/286755621_200x150.jpg",url:"http://vimeo.com/41405220"},{author:"Sunday Paper",title:"Light",thumb:"http://i.vimeocdn.com/video/191510392_200x150.jpg",url:"http://vimeo.com/28685926"},{author:"weareflink",title:"Volkswagen - People's Car Project - Parking",thumb:"http://i.vimeocdn.com/video/196212132_200x150.jpg",url:"http://vimeo.com/29308144"},{author:"Giant Ant",title:"WIRED // What's Inside: Play-Doh (Director's Cut)",thumb:"http://i.vimeocdn.com/video/445546104_200x150.jpg",url:"http://vimeo.com/71841985"},{author:"Golden Wolf",title:"Adidas - #ALLINFORMURRAY",thumb:"http://i.vimeocdn.com/video/445698928_200x150.jpg",url:"http://vimeo.com/71976695"},{author:"A N F",title:"Egyptrixx - Start from the Beginning",thumb:"http://i.vimeocdn.com/video/259770961_200x150.jpg",url:"http://vimeo.com/16660444"},{author:"Plenty",title:"HBO Latinoamerica - Reel",thumb:"http://i.vimeocdn.com/video/450870325_200x150.jpg",url:"http://vimeo.com/76084225"},{author:"malika favre",title:"TOTO Perfect Day",thumb:"http://i.vimeocdn.com/video/437778164_200x150.jpg",url:"http://vimeo.com/66386720"}],additionInfo=[[{url:"/bower/bridgeplus_ui/public/images/CORPORATE_PG.png",width:460,height:102,x:600,y:120},{url:"/bower/bridgeplus_ui/public/images/CORPORATE.png",width:123,height:41,x:739,y:220}],[{url:"/bower/bridgeplus_ui/public/images/MENTOR_PG.png",
width:245,height:183,x:677.5,y:110},{url:"/bower/bridgeplus_ui/public/images/MENTOR.png",width:123,height:41,x:739,y:290}],[{url:"/bower/bridgeplus_ui/public/images/STUDENT_PG.png",width:446,height:207,x:620,y:200},{url:"/bower/bridgeplus_ui/public/images/STUDENT.png",width:123,height:41,x:739,y:360}]];$(function(){function t(){u.currentW=$(window).width(),u.currentH=$(window).height(),a=.5*u.currentW,c=.5*u.currentH}function e(){u.currentH/780}function i(t){var e=[];return t.classList&&"function"==typeof t.classList.forEach?t.classList.forEach(function(t){e.push(t)}):e=(t.getAttribute("class")||"").split(" "),e}function o(){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);console.log(t);var e=$(".to-top").outerHeight();console.log(e);var i=$("#footer").outerHeight();console.log(i);var o=t-e-i;console.log(o),$("#index-footer").parent().height(o)}function n(){$(".owl-carousel").owlCarousel({items:1,lazyLoad:!0,loop:!0,autoplayTimeout:8e3,autoplayHoverPause:!0,nav:!0,navRewind:!0,smartSpeed:500,navText:['<i class="" style="font-family: cursive;">&lt;</i>','<i class="" style="font-family: cursive;">&gt;</i>'],autoHeight:!0})}function r(){o(),setTimeout(n,500)}var a,c,u={currentW:0,currentH:0};!function(){function t(){function t(){var e=n.clone().attr({r:r,opacity:0,fill:"none","stroke-width":1});return e.attr({opacity:1}).animate({r:r+10,"stroke-width":41,stroke:"#FFF"},1e3,">",function(){}),r+=40,a+150>r?void setTimeout(t,50):($("#logo").addClass("active"),$(".logo_top").addClass("active"),void setTimeout(function(){BridgeWheel.start()},500))}var e=this.intro=new Raphael("bridge_plus_intro",u.currentW,u.currentH),o=e.path("M 0,"+u.currentH+" L 0,"+u.currentH).attr({fill:"#E71E30",stroke:"#E71E30","stroke-width":4}),n=e.circle(a,c,0).attr({fill:"#111",stroke:"#111"});o.animate({path:"M 0,"+u.currentH+" L "+a+","+c},1e3,">",function(){i.arcouno(),o.animate({path:"M "+a+","+c+"L "+a+","+c},1e3,">",function(){}),n.animate({r:"72"},1800,">",function(){}),setTimeout(t,1100)});var r=0}function e(){var t=i.intro.path(i.arc([a,c],120,120,320)).attr({stroke:"#111","stroke-width":1});t.attr({transform:"r0,"+a+","+c}).animate({transform:"r360,"+a+","+c},4e3)}var i=window.INTRO={intro:null,init:t,arcouno:e,arc:function(t,e,i,o){for(var n=i,r=this.toCoords(t,e,n),a="M "+r[0]+" "+r[1];o>=n;)r=this.toCoords(t,e,n),a+=" L "+r[0]+" "+r[1],n++;return a},toCoords:function(t,e,i){var o=i/180*Math.PI,n=t[0]+Math.cos(o)*e,r=t[1]+Math.sin(o)*e;return[n,r]}}}(),function(){var t=window.BridgeWheel={first:!0,sourceArr:[],imgAll:[],init:function(){INTRO.init()},evHandlers:function(){},start:function(){t.resize();var e=new Raphael("bridge_plus_wheel",2e3,1e3);e.wheel(440,vmvideos.slice(32,51),2,vmvideos,[],additionInfo)},resize:e}}(),$(window).on("resize",function(){t(),BridgeWheel.resize()});var s=$(".wheel_text"),l=$(".main_page_wheel"),h=$(".main_page_bottom"),m=$(".main_page_right");$(document).on("wheel/show",function(){$(".svg_group").hover(function(){$(document).trigger("show_group_desc",i(this))},function(){$(document).trigger("hide_group_desc",i(this))}).on("click",function(){var t,e=i(this);e.indexOf("svg_group_0")>=0&&(t="/portal/zh/student-portal"),e.indexOf("svg_group_1")>=0&&(t="/portal/zh/mentor-portal"),e.indexOf("svg_group_2")>=0&&(t="/portal/zh/hr-portal"),$(document).trigger("navigate",t)})}).on("click",".logo_right",function(){$(document).trigger("show_right")}).on("show_group_desc",function(t,e,i){s.hide().each(function(){$(this).hasClass(i)&&$(this).show()})}).on("hide_group_desc",function(t,e,i){s.each(function(){$(this).hasClass(i)&&$(this).hide()})}).on("show_wheel",function(){l.animate({top:0,left:0},500),h.animate({top:"100%",left:0},500),m.animate({left:"100%"},500)}).on("show_content",function(){l.animate({top:"-100%",left:0},500),h.animate({top:0,left:0},500),m.animate({left:"100%"},500),r()}).on("show_right",function(){l.animate({left:"-100%"},500),h.animate({left:"-100%"},500),m.animate({left:0},500)}).on("pjax/done",document,function(){$(document).trigger("show_content",null),"function"==typeof n&&setTimeout(n,100),"function"==typeof modals.prepare&&setTimeout(modals.prepare,100)}),t(),BridgeWheel.init(),BridgeWheel.evHandlers(),$(document).on("resize",r),0===location.pathname.indexOf("/portal/")&&$(document).trigger("show_content")}),$(document).ready(function(){var t=!1;$(".menu-button").click(function(){t?$(".menu").removeClass("active"):$(".menu").addClass("active"),t=!t}),$(document).on("show_right",function(){$("#pic-entrance").addClass("active")}).on("show_wheel",function(){$("#pic-entrance").removeClass("active")}).on("click",".left-arrow",function(){$(document).trigger("show_wheel")})}),!function(){function t(t,e,i,o,n){if(m.indexOf(t)>=0&&m.indexOf(e)>=0)return o;var r=h.indexOf(t),a=h.indexOf(e);return 0>r||0>a||r===a?i:a>r?o:n}function e(t){t.css({position:"absolute",left:"100%",right:"-100%"})}function i(t){t.animate({left:"-100%",right:"100%"},"slow",function(){t.remove()})}function o(t){return t.animate({left:"0",right:"0"},"slow",function(){t.css("position","relative")}).promise()}function n(t){t.css({position:"absolute",left:"-100%",right:"100%"})}function r(t){t.animate({left:"100%",right:"-100%"},"slow",function(){t.remove()})}function a(t,e){var i=document.createElement("div");i.innerHTML=t.innerHTML;var o=$(i),n=$(t);o.css({position:"absolute",left:"0",right:"0"}),o.insertBefore(n),e&&e(o,n)}function c(){$("#footer").css("position","fixed")}function u(){$("#footer").css("position","relative")}function s(t,n){c(),e(t),i(n),o(t).done(u)}function l(t,e){c(),n(t),r(e),o(t).done(u)}var h=["/portal/zh/about-us","/portal/zh/team","/portal/zh/video","/portal/zh/contact-us","/portal/zh/join-us"],m=["/portal/zh/student-portal","/portal/zh/mentor-portal","/portal/zh/hr-portal"];window.animationDirector={returnToOriginalPos:o,cloneOldSlide:a,getAnimation:t,slideToLeft:s,slideToRight:l}}(),$(function(){function t(t){d.push(t),d.length>5&&d.shift()}function e(t){g.push(t),g.length>5&&g.shift()}function i(t){f.push(t),f.length>5&&f.shift()}function o(t,e,i){r(e,i,function(){h.classList.add("hide"),setTimeout(function(){h.innerHTML=t,h.classList.remove("hide")},100)})}function n(){h=h||document.querySelector(".body"),m=m||document.querySelector("title")}function r(t,e,i){$(document).trigger("pjax/refresh"),n(),i(),c(e,t),$(document).trigger("pjax/done"),console.log("pjax/done")}function a(t,e,i){r(e,i,function(){animationDirector.cloneOldSlide(h,function(e,i){h.innerHTML=t,animationDirector.slideToLeft(i,e)})})}function c(t,e){Object.keys(t).forEach(function(e){h.setAttribute("data-"+e,t[e])}),m&&(m.innerHTML=e)}function u(t,e,i){r(e,i,function(){animationDirector.cloneOldSlide(h,function(e,i){h.innerHTML=t,v(i,e)})})}function s(t){for(var e={},i=t.length-1;i>=0;i--){var o=t[i];0==o.name.indexOf("data-")&&(e[o.name.slice(5)]=o.value)}return e}function l(n,r,a,c){$(document).trigger("pjax/start"),$.get(n,function(u){h=h||document.querySelector(".body"),m=m||document.querySelector("title"),p.innerHTML=u,a&&(history.pushState(n,"",n),t(h.innerHTML),e(s(h.attributes)),m&&i(m.innerHTML));var l=p.querySelector(".body"),d=p.querySelector("title");(c=c||o)(l.innerHTML,d&&d.innerHTML,s(l.attributes),r)})}var h,m,p=document.createElement("DIV"),d=[],g=[],f=[];document.addEventListener("click",function(t){if("A"!==t.target.nodeName)return!0;var e=location,i=t.target,n=i.href?i.href.toLowerCase():"";return"false"===i.getAttribute("use-pjax")||!n.length||"#"==n.charAt(0)||0==n.indexOf("mailto:")||0==n.indexOf("javascript:")||(t.preventDefault(),t.stopPropagation(),"/"===i.pathname?($(document).trigger("show_wheel"),history.pushState("/","","/"),!1):void l(n,i,!0,animationDirector.getAnimation(e.pathname,i.pathname,o,a,u)))},!1),window.addEventListener("popstate",function(){return d&&d.length?void o(d.pop(),f.pop(),g.pop()):void l(location.href)}),$(document).on("navigate",function(t,e){l(e,null,!0)});var v=animationDirector.slideToRight}),Raphael.fn.group=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","g");if(i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)"),i.classList)i.classList.add("svg_group"),i.classList.add(e);else{var o=(i.getAttribute("class")||"").split(" "),n=!1;-1==o.indexOf("svg_group")&&(o.push("svg_group"),n=!0),-1==o.indexOf(e)&&(o.push(e),n=!0),n&&i.setAttribute("class",o.join(" "))}if(t)for(var r=0,a=t.length;a>r;r++)i.appendChild(t[r].node);return this.canvas.appendChild(i),i},Raphael.fn.wheel=function(t,e,i,o,n,r){function a(){var t=d.image(this.src,690,w,x,j).attr({opacity:0});t.node.id=this.id,v.push(t),++f==g&&l()}function c(){var t=d.image("http://vlog.it/img/placeholder.jpg",690,w,x,j).attr({opacity:0});t.node.id=this.id,v.push(t),++f==g&&l()}function u(t,e){var i="M,800,500,L,862.3735072453278,206.5557197798583,A,300,300,0,0,0,737.6264927546722,206.5557197798583,z",o="M,800,500,L,844.8707740637095,274.419385507257,A,230,230,0,0,0,755.1292259362905,274.419385507257,z",n="M,800,500,L,835.6033494330103,344.0115340509082,A,160,160,0,0,0,764.3966505669897,344.0115340509082,z",r=[d.path(n).attr({stroke:"none"}),d.path(o).attr({stroke:"none"}),d.path(i).attr({stroke:"none"})],a=document.createElementNS(_,"clipPath");a.setAttribute("id","clip_ring"+t),a.appendChild(r[t].node),d.canvas.appendChild(a),e.forEach(function(e,i){var o=b*i;e.rotate(o,800,500),e.node.setAttribute("clip-path","url(#clip_ring"+t+")"),e.node.style.cursor="pointer",e.attr({opacity:0}),s(e,b,i)})}function s(t,e,i){t.attr({transform:"r"+e*i+",800,500t0,140"})}function l(){var t=[];r[r.length-(i+1)].forEach(function(e){var i=d.image(e.url,e.x,e.y,e.width,e.height).attr({opacity:1});i.node.setAttribute("class","svg_group_addtion"),t.push(i)});var a;switch(i){case 2:a=300;break;case 1:a=230;break;case 0:a=160}var c=(a-100)/a;c=(100*c|0)/100;var s=d.circle(800,500,a).attr({fill:"#000",stroke:"none"});s.node.style.transform="scale("+c+","+c+")",d.group([t[0]].concat(v,s,t[1]),"svg_group_"+i),u(i,v),n.push(v),2==i?d.wheel(340,o.slice(15,31),1,e,n,r):1==i?d.wheel(240,o.slice(0,14),0,e,n,r):(h(),$(document).trigger("wheel/show"))}function h(){var t=360/14,e=n[2],i=e.length;e.forEach(function(o,n){n==i-1?o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){m(),e.forEach(function(e,i){e.animate({transform:"r"+(360+t*i)+",800,500"},3e4)})}):o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){})})}function m(){var t=22.5,e=n[1],i=e.length;e.forEach(function(o,n){n==i-1?o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){p(),e.forEach(function(e,i){e.animate({transform:"r"+(-360+t*i)+",800,500"},3e4)})}):o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){})})}function p(){var t=n[0],e=t.length,i=20;t.forEach(function(o,n){n==e-1?o.attr({opacity:1}).animate({transform:"r"+i*n+",800,500t0,0"},1e3,"<",function(){t.forEach(function(t,e){t.animate({transform:"r"+(360+i*e)+",800,500"},3e4)})}):o.attr({opacity:1}).animate({transform:"r"+i*n+",800,500t0,0"},1e3,"<",function(){})})}var d=this,g=e.length,f=0,v=[],b=360/g,w=340-70*i,_="http://www.w3.org/2000/svg",x=210,j=100;e.forEach(function(t){var e=new Image;e.onload=a,e.onerror=c,e.src=t.thumb,e.id=t.url,e.title=t.title,e.author=t.author})},$(document).ready(function(){function t(){function t(){for(var t=$(".carousel .carousel-inner"),e=$(".carousel .item"),i=0,o=0;o<e.length;o++)i<$(e[o]).height()&&(i=$(e[o]).height());t.height(i+"px")}console.log("preparing my carousel...");var e=$("img[preload-src]").map(function(e,i){var o=$.Deferred(),n=$(i),r=new Image;return r.onload=function(){n.attr("src",r.src),t(),o.resolve(e)},r.src=n.attr("preload-src"),o});$.when.apply(null,e.get()).then(function(){});var i=$(".carousel .carousel-inner");i.height(i.height()+"px"),$(".carousel .item").each(function(){var t=$(this);t.css("width",t.closest(".carousel").width()+"px").css("float","left").css("position","absolute")}),$(".carousel .nav-bar .prev").click(function(){if(!o){o=!0;var t=$(this).closest(".carousel"),e=t.find(".item.active"),i=e.prev(".item");i.addClass("active").css("margin-left","-100%"),i.length<=0&&(i=t.find(".item").last(),i.addClass("active").css("margin-left","-200%")),e.animate({"margin-left":"100%"},function(){e.removeClass("active"),e.css("margin-left",0),i.animate({"margin-left":0},function(){o=!1})})}});var o=!1;$(".carousel .nav-bar .next").click(function(){if(!o){o=!0;var t=$(this).closest(".carousel"),e=t.find(".item.active"),i=e.next(".item");i.length<=0&&(i=t.find(".item:first-child")),i.addClass("active").css("margin-left","100%"),e.animate({"margin-left":"-100%"},function(){e.removeClass("active"),e.css("margin-left",0),i.animate({"margin-left":0},function(){o=!1})})}})}t(),$(document).on("pjax/done",function(){setTimeout(t,100)})}),!function(){function t(t,e){$(t).children().each(function(){var t=$(this);t.attr("data-group")&&t.attr("data-group")!==e?t.hide():t.show()})}$(document).on("show_content",function(e,i,o){t(".group-description",o),t(".carousel-items",o),t(".services",o)})}(),$(document).ready(function(){function t(){$(".mask .text").each(function(){function t(){e.css("width",i[0].width+"px"),e.css("min-height",i[0].height+"px")}var e=$(this),i=e.next(".image");t(),i.load(t)}),$(".mask .close.button").click(function(){var t=$(this).closest(".mask");t.hide();var e=t.find("video");e.length&&e[0].pause()}),$(".mask").css("background-color","rgba(0, 0, 0, 0.4)").css("padding-left",0).hide(),$(".mask.darker").css("background-color","rgba(0, 0, 0, 0.8)"),console.log("hided modals: ",$(".mask").length),$("[data-modal-selector]").on("click",function(t){var e=$(this),i=e.attr("data-modal-selector"),o=$(i);o.css("display","flex"),t.stopPropagation()}),console.log("modals prepared.")}t(),$(document).on("pjax/done",function(){setTimeout(t,100)}),window.modals={prepare:t}});var vmvideos=[{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_1.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_2.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_3.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_4.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_5.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_6.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_7.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_8.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_9.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_10.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_11.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_12.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_13.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_14.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_15.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_16.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_17.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_1.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_2.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_3.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_4.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_5.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_6.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_7.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_8.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_9.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_10.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_11.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_12.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_13.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_14.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_15.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_16.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_1.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_2.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_3.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_4.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_5.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_6.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_7.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_8.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_9.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_10.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_11.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_12.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_13.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_14.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_15.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_16.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_17.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_18.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_19.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_20.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_21.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_22.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_23.jpg"}],additionInfo=[[{url:"/bower/bridgeplus_ui/public/images/CORPORATE_PG.png",width:460,height:102,x:600,y:120},{url:"/bower/bridgeplus_ui/public/images/CORPORATE.png",width:123,height:41,x:739,y:220}],[{url:"/bower/bridgeplus_ui/public/images/MENTOR_PG.png",width:245,height:183,x:677.5,y:110},{url:"/bower/bridgeplus_ui/public/images/MENTOR.png",width:123,height:41,x:739,y:290}],[{url:"/bower/bridgeplus_ui/public/images/STUDENT_PG.png",width:446,height:207,x:620,y:200},{url:"/bower/bridgeplus_ui/public/images/STUDENT.png",width:123,height:41,x:739,y:360}]];$(function(){function t(){r.currentW=$(window).width(),r.currentH=$(window).height(),o=.5*r.currentW,n=.5*r.currentH}function e(){var t=$("#bridge_plus_intro svg");if(t.length){var e=0|t.attr("height");t.css({transform:"scale3d(1,"+r.currentH/e+",1)"})}}function i(t){var e=[];return t.classList&&"function"==typeof t.classList.forEach?t.classList.forEach(function(t){e.push(t)}):e=(t.getAttribute("class")||"").split(" "),e}var o,n,r={currentW:0,currentH:0};!function(){function t(){function t(){var e=c.clone().attr({r:u,opacity:0,fill:"none","stroke-width":1});e.attr({opacity:1}).animate({r:u+10,"stroke-width":41,stroke:"#FFF"},1e3,">",function(){}),u+=40,o+150>u?setTimeout(t,50):($("#logo").addClass("active"),$(".logo_top").addClass("active"),setTimeout(function(){BridgeWheel.start()},1e3))}var e=this.intro=new Raphael("bridge_plus_intro",r.currentW,r.currentH),a=e.path("M 0,"+r.currentH+" L 0,"+r.currentH).attr({fill:"#E71E30",stroke:"#E71E30","stroke-width":4}),c=e.circle(o,n,0).attr({fill:"#111",stroke:"#111"});a.animate({path:"M 0,"+r.currentH+" L "+o+","+n},1e3,">",function(){i.arcouno(),a.animate({path:"M "+o+","+n+"L "+o+","+n},1e3,">",function(){}),c.animate({r:"72"},1800,">",function(){}),setTimeout(t,1100)});var u=0}function e(){var t=i.intro.path(i.arc([o,n],120,120,320)).attr({stroke:"#111","stroke-width":1});t.attr({transform:"r0,"+o+","+n}).animate({transform:"r360,"+o+","+n},4e3)}var i=window.INTRO={intro:null,init:t,arcouno:e,arc:function(t,e,i,o){for(var n=i,r=this.toCoords(t,e,n),a="M "+r[0]+" "+r[1];o>=n;)r=this.toCoords(t,e,n),a+=" L "+r[0]+" "+r[1],n++;return a},toCoords:function(t,e,i){var o=i/180*Math.PI,n=t[0]+Math.cos(o)*e,r=t[1]+Math.sin(o)*e;return[n,r]}}}(),function(){var t=window.BridgeWheel={first:!0,sourceArr:[],imgAll:[],init:function(){this.first&&(this.first=!1,INTRO.init())},start:function(){t.resize(),$("#bridge_plus_wheel").addClass("active");var e=new Raphael("bridge_plus_wheel",1600,1e3);e.wheel(440,vmvideos.slice(7,17),2,vmvideos,[],additionInfo)},resize:e}}(),$(window).on("resize",function(){t(),BridgeWheel.resize()});var a=$(".wheel_text"),c=$(".main_page_wheel"),u=$(".main_page_bottom"),s=$(".main_page_right");$(document).on("wheel/show",function(){$(".svg_group").hover(function(){$(document).trigger("show_group_desc",i(this))},function(){$(document).trigger("hide_group_desc",i(this))}).on("click",function(){var t,e=i(this);e.indexOf("svg_group_0")>=0&&(t="/portal/zh/student-portal"),e.indexOf("svg_group_1")>=0&&(t="/portal/zh/mentor-portal"),e.indexOf("svg_group_2")>=0&&(t="/portal/zh/hr-portal"),$(document).trigger("navigate",t)})}).on("click",".logo_right",function(){$(document).trigger("show_right")}).on("show_group_desc",function(t,e,i){a.hide().each(function(){$(this).hasClass(i)&&$(this).show()})}).on("hide_group_desc",function(t,e,i){a.each(function(){$(this).hasClass(i)&&$(this).hide()})}).on("show_wheel",function(){c.animate({top:0,left:0},500),u.animate({top:"100%",left:0},500),s.animate({left:"100%"},500),BridgeWheel.init()}).on("show_content",function(){c.animate({top:"-100%",left:0},500),u.animate({top:0,left:0},500),s.animate({left:"100%"},500)}).on("show_right",function(){c.animate({left:"-100%"},500),u.animate({left:"-100%"},500),s.animate({left:0},500)}).on("pjax/done",document,function(){$(document).trigger("show_content",null),"function"==typeof prepareCarousel&&setTimeout(prepareCarousel,100)}),t(),"/"==location.pathname?BridgeWheel.init():$(document).trigger("show_content")}),$(document).ready(function(){var t=!1;$(".menu-button").click(function(){t?$(".menu").removeClass("active"):$(".menu").addClass("active"),t=!t}),$(document).on("show_right",function(){$("#pic-entrance").addClass("active")}).on("show_wheel",function(){$("#pic-entrance").removeClass("active")}).on("click",".left-arrow",function(){$(document).trigger("show_wheel")})}),!function(){function t(t,e,i,o,n){if(m.indexOf(t)>=0&&m.indexOf(e)>=0)return o;var r=h.indexOf(t),a=h.indexOf(e);return 0>r||0>a||r===a?i:a>r?o:n}function e(t){t.css({position:"absolute",left:"100%",right:"-100%"})}function i(t){t.animate({left:"-100%",right:"100%"},"slow",function(){t.remove()})}function o(t){return t.animate({left:"0",right:"0"},"slow",function(){t.css("position","relative")}).promise()}function n(t){t.css({position:"absolute",left:"-100%",right:"100%"})}function r(t){t.animate({left:"100%",right:"-100%"},"slow",function(){t.remove()})}function a(t,e){var i=document.createElement("div");i.innerHTML=t.innerHTML;var o=$(i),n=$(t);o.css({position:"absolute",left:"0",right:"0"}),o.insertBefore(n),e&&e(o,n)}function c(){$("#footer").css("position","fixed")}function u(){$("#footer").css("position","relative")}function s(t,n){c(),e(t),i(n),o(t).done(u)}function l(t,e){c(),n(t),r(e),o(t).done(u)}var h=["/portal/zh/about-us","/portal/zh/team","/portal/zh/video","/portal/zh/contact-us","/portal/zh/join-us"],m=["/portal/zh/student-portal","/portal/zh/mentor-portal","/portal/zh/hr-portal"];window.animationDirector={returnToOriginalPos:o,cloneOldSlide:a,getAnimation:t,slideToLeft:s,slideToRight:l}}(),$(function(){function t(t){d.push(t),d.length>5&&d.shift()}function e(t){g.push(t),g.length>5&&g.shift()}function i(t){f.push(t),f.length>5&&f.shift()}function o(t,e,i){r(e,i,function(){h.classList.add("hide"),setTimeout(function(){h.innerHTML=t,h.classList.remove("hide")},100)})}function n(){h=h||document.querySelector(".body"),m=m||document.querySelector("title")}function r(t,e,i){$(document).trigger("pjax/refresh"),n(),i(),c(e,t),$(document).trigger("pjax/done"),console.log("pjax/done")}function a(t,e,i){r(e,i,function(){animationDirector.cloneOldSlide(h,function(e,i){h.innerHTML=t,animationDirector.slideToLeft(i,e)})})}function c(t,e){Object.keys(t).forEach(function(e){h.setAttribute("data-"+e,t[e])}),m&&(m.innerHTML=e)}function u(t,e,i){r(e,i,function(){animationDirector.cloneOldSlide(h,function(e,i){h.innerHTML=t,v(i,e)})})}function s(t){for(var e={},i=t.length-1;i>=0;i--){var o=t[i];0==o.name.indexOf("data-")&&(e[o.name.slice(5)]=o.value)}return e}function l(n,r,a,c){$(document).trigger("pjax/start"),$.get(n,function(u){h=h||document.querySelector(".body"),m=m||document.querySelector("title"),p.innerHTML=u,a&&(history.pushState(n,"",n),t(h.innerHTML),e(s(h.attributes)),m&&i(m.innerHTML));var l=p.querySelector(".body"),d=p.querySelector("title");(c=c||o)(l.innerHTML,d&&d.innerHTML,s(l.attributes),r)})}var h,m,p=document.createElement("DIV"),d=[],g=[],f=[];document.addEventListener("click",function(t){var e=t.target;if("A"!==e.nodeName){if(e=$(e).closest("a"),!e.length)return!0;e=e[0]}var i=e.href?e.href.toLowerCase():"";return"false"===e.getAttribute("use-pjax")||!i.length||"#"==i.charAt(0)||0==i.indexOf("mailto:")||0==i.indexOf("javascript:")||(t.preventDefault(),t.stopPropagation(),void l(i,e,!0,animationDirector.getAnimation(location.pathname,i,o,a,u)))},!1),window.addEventListener("popstate",function(){return d&&d.length?void o(d.pop(),f.pop(),g.pop()):void l(location.href)}),$(document).on("navigate",function(t,e){l(e,null,!0)});var v=animationDirector.slideToRight}),Raphael.fn.group=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","g");if(i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)"),i.classList)i.classList.add("svg_group"),i.classList.add(e);else{var o=(i.getAttribute("class")||"").split(" "),n=!1;-1==o.indexOf("svg_group")&&(o.push("svg_group"),n=!0),-1==o.indexOf(e)&&(o.push(e),n=!0),n&&i.setAttribute("class",o.join(" "))}if(t)for(var r=0,a=t.length;a>r;r++)i.appendChild(t[r].node);return this.canvas.appendChild(i),i},Raphael.fn.wheel=function(t,e,i,o,n,r){function a(){var t=d.image(this.src,690,w,x,j).attr({opacity:0});v.push(t),++f==g&&l()}function c(){var t=d.image("http://vlog.it/img/placeholder.jpg",690,w,x,j).attr({opacity:0});t.node.id=this.id,v.push(t),++f==g&&l()}function u(t,e){var i="M,800,500,L,862.3735072453278,206.5557197798583,A,300,300,0,0,0,737.6264927546722,206.5557197798583,z",i="M,800,500,L,855.1248553449711, 205.1080700948295,A,300,300,0,0,0,744.8751446550289, 205.1080700948295,z",i="M,800,500,L,892.7050983124842, 214.68304511145396,A,300,300,0,0,0,707.2949016875158, 214.68304511145396,z",o="M,800,500,L,844.8707740637095,274.419385507257,A,230,230,0,0,0,755.1292259362905,274.419385507257,z",o="M,800,500,L,871.073908706238, 281.2570012521147,A,230,230,0,0,0,728.926091293762, 281.2570012521147,z",n="M,800,500,L,835.6033494330103,344.0115340509082,A,160,160,0,0,0,764.3966505669897,344.0115340509082,z",n="M,800,500,L,849.4427190999916, 347.8309573927754,A,160,160,0,0,0,750.5572809000084, 347.8309573927754,z",r=[d.path(n).attr({stroke:"none"}),d.path(o).attr({stroke:"none"}),d.path(i).attr({stroke:"none"})],a=document.createElementNS(_,"clipPath");a.setAttribute("id","clip_ring"+t),a.appendChild(r[t].node),d.canvas.appendChild(a),e.forEach(function(e,i){var o=b*i;e.rotate(o,800,500),e.node.setAttribute("clip-path","url(#clip_ring"+t+")"),e.node.style.cursor="pointer",e.attr({opacity:0}),s(e,b,i)})}function s(t,e,i){t.attr({transform:"r"+e*i+",800,500t0,140"})}function l(){var t=[];r[r.length-(i+1)].forEach(function(e){var i=d.image(e.url,e.x,e.y,e.width,e.height).attr({opacity:1});i.node.classList.add("svg_group_addtion"),t.push(i)});var e;switch(i){case 2:e=300;break;case 1:e=230;break;case 0:e=160}var a=(e-100)/e;a=(100*a|0)/100;var c=d.circle(800,500,e).attr({fill:"#000",stroke:"none"});c.node.style.transform="scale("+a+","+a+")",d.group([t[0]].concat(v,c,t[1]),"svg_group_"+i),u(i,v),n.push(v),2==i?d.wheel(340,o.slice(17,27),1,o,n,r):1==i?d.wheel(240,o.slice(34,44),0,o,n,r):(h(),$(document).trigger("wheel/show"))}function h(){var t=36,e=n[2],i=e.length;e.forEach(function(o,n){n==i-1?o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){m(),e.forEach(function(e,i){e.animate({transform:"r"+(360+t*i)+",800,500"},3e4)})}):o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){})})}function m(){var t=36,e=n[1],i=e.length;e.forEach(function(o,n){o.attr({opacity:1}).animate({transform:"r"+t*n+",800,500t0,0"},1e3,"<>",function(){n==i-1&&(p(),e.forEach(function(e,i){e.animate({transform:"r"+(-360+t*i)+",800,500"},3e4)}))})})}function p(){var t=n[0],e=t.length,i=36;t.forEach(function(o,n){o.attr({opacity:1}).animate({transform:"r"+i*n+",800,500t0,0"},1e3,"<",function(){n==e-1&&t.forEach(function(t,e){t.animate({transform:"r"+(360+i*e)+",800,500"},3e4)})})})}var d=this,g=e.length,f=0,v=[],b=360/g,w=340-70*i,_="http://www.w3.org/2000/svg",x=210,j=100;e.forEach(function(t){var e=new Image;e.onload=a,e.onerror=c,e.src=t.thumb,e.id=t.url,e.title=t.title,e.author=t.author})};
$(document).ready(function(){function e(){function e(){for(var e=$(".carousel .carousel-inner"),t=$(".carousel .item"),a=0,i=0;i<t.length;i++)a<$(t[i]).height()&&(a=$(t[i]).height());e.height(a+"px")}console.log("preparing my carousel...");var t=$("img[preload-src]").map(function(t,a){var i=$.Deferred(),n=$(a),s=new Image;return s.onload=function(){n.attr("src",s.src),e(),i.resolve(t)},s.src=n.attr("preload-src"),i});$.when.apply(null,t.get()).then(function(){});var a=$(".carousel .carousel-inner");a.height(a.height()+"px"),$(".carousel .item").each(function(){var e=$(this);e.css("width",e.closest(".carousel").width()+"px").css("float","left").css("position","absolute")}),$(".carousel .nav-bar .prev").click(function(){if(!i){i=!0;var e=$(this).closest(".carousel"),t=e.find(".item.active"),a=t.prev(".item");a.addClass("active").css("margin-left","-100%"),a.length<=0&&(a=e.find(".item").last(),a.addClass("active").css("margin-left","-200%")),t.animate({"margin-left":"100%"},function(){t.removeClass("active"),t.css("margin-left",0),a.animate({"margin-left":0},function(){i=!1})})}});var i=!1;$(".carousel .nav-bar .next").click(function(){if(!i){i=!0;var e=$(this).closest(".carousel"),t=e.find(".item.active"),a=t.next(".item");a.length<=0&&(a=e.find(".item:first-child")),a.addClass("active").css("margin-left","100%"),t.animate({"margin-left":"-100%"},function(){t.removeClass("active"),t.css("margin-left",0),a.animate({"margin-left":0},function(){i=!1})})}})}e(),$(document).on("pjax/done",function(){setTimeout(e,100)})});
!function(){function t(t,n){$(t).children().each(function(){var t=$(this);t.attr("data-group")&&t.attr("data-group")!==n?t.hide():t.show()})}$(document).on("show_content",function(n,o,c){t(".group-description",c),t(".carousel-items",c),t(".services",c)})}();
$(document).ready(function(){function o(){$(".mask .text").each(function(){function o(){a.css("width",s[0].width+"px"),a.css("min-height",s[0].height+"px")}var a=$(this),s=a.next(".image");o(),s.load(o)}),$(".mask .close.button").click(function(){var o=$(this).closest(".mask");o.hide();var a=o.find("video");a.length&&a[0].pause()}),$(".mask").css("background-color","rgba(0, 0, 0, 0.4)").css("padding-left",0).hide(),$(".mask.darker").css("background-color","rgba(0, 0, 0, 0.8)"),console.log("hided modals: ",$(".mask").length),$("[data-modal-selector]").on("click",function(o){var a=$(this),s=a.attr("data-modal-selector"),t=$(s);t.css("display","flex"),o.stopPropagation()}),console.log("modals prepared.")}o(),$(document).on("pjax/done",function(){setTimeout(o,100)}),window.modals={prepare:o}});
var vmvideos=[{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_1.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_2.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_3.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_4.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_5.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_6.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_7.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_8.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_9.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_10.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_11.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_12.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_13.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_14.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_15.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_16.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/corporate_17.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_1.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_2.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_3.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_4.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_5.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_6.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_7.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_8.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_9.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_10.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_11.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_12.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_13.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_14.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_15.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/mentor_16.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_1.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_2.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_3.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_4.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_5.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_6.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_7.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_8.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_9.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_10.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_11.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_12.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_13.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_14.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_15.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_16.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_17.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_18.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_19.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_20.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_21.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_22.jpg"},{thumb:"/bower/bridgeplus_ui/public/images/wheel/student_23.jpg"}],additionInfo=[[{url:"/bower/bridgeplus_ui/public/images/CORPORATE_PG.png",width:460,height:102,x:600,y:120},{url:"/bower/bridgeplus_ui/public/images/CORPORATE.png",width:123,height:41,x:739,y:220}],[{url:"/bower/bridgeplus_ui/public/images/MENTOR_PG.png",width:245,height:183,x:677.5,y:110},{url:"/bower/bridgeplus_ui/public/images/MENTOR.png",width:123,height:41,x:739,y:290}],[{url:"/bower/bridgeplus_ui/public/images/STUDENT_PG.png",width:446,height:207,x:620,y:200},{url:"/bower/bridgeplus_ui/public/images/STUDENT.png",width:123,height:41,x:739,y:360}]];
$(function(){function t(){r.currentW=$(window).width(),r.currentH=$(window).height(),i=.5*r.currentW,o=.5*r.currentH}function e(){var t=$("#bridge_plus_intro svg");if(t.length){var e=0|t.attr("height");t.css({transform:"scale3d(1,"+r.currentH/e+",1)"})}}function n(t){var e=[];return t.classList&&"function"==typeof t.classList.forEach?t.classList.forEach(function(t){e.push(t)}):e=(t.getAttribute("class")||"").split(" "),e}var i,o,r={currentW:0,currentH:0};!function(){function t(){function t(){var e=s.clone().attr({r:c,opacity:0,fill:"none","stroke-width":1});e.attr({opacity:1}).animate({r:c+10,"stroke-width":41,stroke:"#FFF"},1e3,">",function(){}),c+=40,i+150>c?setTimeout(t,50):($("#logo").addClass("active"),$(".logo_top").addClass("active"),setTimeout(function(){BridgeWheel.start()},1e3))}var e=this.intro=new Raphael("bridge_plus_intro",r.currentW,r.currentH),a=e.path("M 0,"+r.currentH+" L 0,"+r.currentH).attr({fill:"#E71E30",stroke:"#E71E30","stroke-width":4}),s=e.circle(i,o,0).attr({fill:"#111",stroke:"#111"});a.animate({path:"M 0,"+r.currentH+" L "+i+","+o},1e3,">",function(){n.arcouno(),a.animate({path:"M "+i+","+o+"L "+i+","+o},1e3,">",function(){}),s.animate({r:"72"},1800,">",function(){}),setTimeout(t,1100)});var c=0}function e(){var t=n.intro.path(n.arc([i,o],120,120,320)).attr({stroke:"#111","stroke-width":1});t.attr({transform:"r0,"+i+","+o}).animate({transform:"r360,"+i+","+o},4e3)}var n=window.INTRO={intro:null,init:t,arcouno:e,arc:function(t,e,n,i){for(var o=n,r=this.toCoords(t,e,o),a="M "+r[0]+" "+r[1];i>=o;)r=this.toCoords(t,e,o),a+=" L "+r[0]+" "+r[1],o++;return a},toCoords:function(t,e,n){var i=n/180*Math.PI,o=t[0]+Math.cos(i)*e,r=t[1]+Math.sin(i)*e;return[o,r]}}}(),function(){var t=window.BridgeWheel={first:!0,sourceArr:[],imgAll:[],init:function(){this.first&&(this.first=!1,INTRO.init())},start:function(){t.resize(),$("#bridge_plus_wheel").addClass("active");var e=new Raphael("bridge_plus_wheel",1600,1e3);e.wheel(440,vmvideos.slice(7,17),2,vmvideos,[],additionInfo)},resize:e}}(),$(window).on("resize",function(){t(),BridgeWheel.resize()});var a=$(".wheel_text"),s=$(".main_page_wheel"),c=$(".main_page_bottom"),u=$(".main_page_right");$(document).on("wheel/show",function(){$(".svg_group").hover(function(){$(document).trigger("show_group_desc",n(this))},function(){$(document).trigger("hide_group_desc",n(this))}).on("click",function(){var t,e=n(this);e.indexOf("svg_group_0")>=0&&(t="/portal/zh/student-portal"),e.indexOf("svg_group_1")>=0&&(t="/portal/zh/mentor-portal"),e.indexOf("svg_group_2")>=0&&(t="/portal/zh/hr-portal"),$(document).trigger("navigate",t)})}).on("click",".logo_right",function(){$(document).trigger("show_right")}).on("show_group_desc",function(t,e,n){a.hide().each(function(){$(this).hasClass(n)&&$(this).show()})}).on("hide_group_desc",function(t,e,n){a.each(function(){$(this).hasClass(n)&&$(this).hide()})}).on("show_wheel",function(){s.animate({top:0,left:0},500),c.animate({top:"100%",left:0},500),u.animate({left:"100%"},500),BridgeWheel.init()}).on("show_content",function(){s.animate({top:"-100%",left:0},500),c.animate({top:0,left:0},500),u.animate({left:"100%"},500)}).on("show_right",function(){s.animate({left:"-100%"},500),c.animate({left:"-100%"},500),u.animate({left:0},500)}).on("pjax/done",document,function(){$(document).trigger("show_content",null),"function"==typeof prepareCarousel&&setTimeout(prepareCarousel,100)}),t(),"/"==location.pathname?BridgeWheel.init():$(document).trigger("show_content")});
$(document).ready(function(){var e=!1;$(".menu-button").click(function(){e?$(".menu").removeClass("active"):$(".menu").addClass("active"),e=!e}),$(document).on("show_right",function(){$("#pic-entrance").addClass("active")}).on("show_wheel",function(){$("#pic-entrance").removeClass("active")}).on("click",".left-arrow",function(){$(document).trigger("show_wheel")})});
!function(){function t(t,n,e,o,i){if(d.indexOf(t)>=0&&d.indexOf(n)>=0)return o;var r=s.indexOf(t),a=s.indexOf(n);return 0>r||0>a||r===a?e:a>r?o:i}function n(t){t.css({position:"absolute",left:"100%",right:"-100%"})}function e(t){t.animate({left:"-100%",right:"100%"},"slow",function(){t.remove()})}function o(t){return t.animate({left:"0",right:"0"},"slow",function(){t.css("position","relative")}).promise()}function i(t){t.css({position:"absolute",left:"-100%",right:"100%"})}function r(t){t.animate({left:"100%",right:"-100%"},"slow",function(){t.remove()})}function a(t,n){var e=document.createElement("div");e.innerHTML=t.innerHTML;var o=$(e),i=$(t);o.css({position:"absolute",left:"0",right:"0"}),o.insertBefore(i),n&&n(o,i)}function c(){$("#footer").css("position","fixed")}function u(){$("#footer").css("position","relative")}function l(t,i){c(),n(t),e(i),o(t).done(u)}function f(t,n){c(),i(t),r(n),o(t).done(u)}var s=["/portal/zh/about-us","/portal/zh/team","/portal/zh/video","/portal/zh/contact-us","/portal/zh/join-us"],d=["/portal/zh/student-portal","/portal/zh/mentor-portal","/portal/zh/hr-portal"];window.animationDirector={returnToOriginalPos:o,cloneOldSlide:a,getAnimation:t,slideToLeft:l,slideToRight:f}}(),$(function(){function t(t){p.push(t),p.length>5&&p.shift()}function n(t){m.push(t),m.length>5&&m.shift()}function e(t){g.push(t),g.length>5&&g.shift()}function o(t,n,e){r(n,e,function(){s.classList.add("hide"),setTimeout(function(){s.innerHTML=t,s.classList.remove("hide")},100)})}function i(){s=s||document.querySelector(".body"),d=d||document.querySelector("title")}function r(t,n,e){$(document).trigger("pjax/refresh"),i(),e(),c(n,t),$(document).trigger("pjax/done"),console.log("pjax/done")}function a(t,n,e){r(n,e,function(){animationDirector.cloneOldSlide(s,function(n,e){s.innerHTML=t,animationDirector.slideToLeft(e,n)})})}function c(t,n){Object.keys(t).forEach(function(n){s.setAttribute("data-"+n,t[n])}),d&&(d.innerHTML=n)}function u(t,n,e){r(n,e,function(){animationDirector.cloneOldSlide(s,function(n,e){s.innerHTML=t,v(e,n)})})}function l(t){for(var n={},e=t.length-1;e>=0;e--){var o=t[e];0==o.name.indexOf("data-")&&(n[o.name.slice(5)]=o.value)}return n}function f(i,r,a,c){$(document).trigger("pjax/start"),$.get(i,function(u){s=s||document.querySelector(".body"),d=d||document.querySelector("title"),h.innerHTML=u,a&&(history.pushState(i,"",i),t(s.innerHTML),n(l(s.attributes)),d&&e(d.innerHTML));var f=h.querySelector(".body"),p=h.querySelector("title");(c=c||o)(f.innerHTML,p&&p.innerHTML,l(f.attributes),r)})}var s,d,h=document.createElement("DIV"),p=[],m=[],g=[];document.addEventListener("click",function(t){var n=t.target;if("A"!==n.nodeName){if(n=$(n).closest("a"),!n.length)return!0;n=n[0]}var e=n.href?n.href.toLowerCase():"";return"false"!==n.getAttribute("use-pjax")&&e.length&&"#"!=e.charAt(0)&&0!=e.indexOf("mailto:")&&0!=e.indexOf("javascript:")?(t.preventDefault(),t.stopPropagation(),void f(e,n,!0,animationDirector.getAnimation(location.pathname,e,o,a,u))):!0},!1),window.addEventListener("popstate",function(){return p&&p.length?void o(p.pop(),g.pop(),m.pop()):void f(location.href)}),$(document).on("navigate",function(t,n){f(n,null,!0)});var v=animationDirector.slideToRight});
Raphael.fn.group=function(t,a){var r=document.createElementNS("http://www.w3.org/2000/svg","g");if(r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)"),r.classList)r.classList.add("svg_group"),r.classList.add(a);else{var n=(r.getAttribute("class")||"").split(" "),e=!1;-1==n.indexOf("svg_group")&&(n.push("svg_group"),e=!0),-1==n.indexOf(a)&&(n.push(a),e=!0),e&&r.setAttribute("class",n.join(" "))}if(t)for(var o=0,i=t.length;i>o;o++)r.appendChild(t[o].node);return this.canvas.appendChild(r),r},Raphael.fn.wheel=function(t,a,r,n,e,o){function i(){var t=g.image(this.src,690,y,E,L).attr({opacity:0});v.push(t),++m==d&&l()}function c(){var t=g.image("http://vlog.it/img/placeholder.jpg",690,y,E,L).attr({opacity:0});t.node.id=this.id,v.push(t),++m==d&&l()}function s(t,a){var r="M,800,500,L,862.3735072453278,206.5557197798583,A,300,300,0,0,0,737.6264927546722,206.5557197798583,z",r="M,800,500,L,855.1248553449711, 205.1080700948295,A,300,300,0,0,0,744.8751446550289, 205.1080700948295,z",r="M,800,500,L,892.7050983124842, 214.68304511145396,A,300,300,0,0,0,707.2949016875158, 214.68304511145396,z",n="M,800,500,L,844.8707740637095,274.419385507257,A,230,230,0,0,0,755.1292259362905,274.419385507257,z",n="M,800,500,L,871.073908706238, 281.2570012521147,A,230,230,0,0,0,728.926091293762, 281.2570012521147,z",e="M,800,500,L,835.6033494330103,344.0115340509082,A,160,160,0,0,0,764.3966505669897,344.0115340509082,z",e="M,800,500,L,849.4427190999916, 347.8309573927754,A,160,160,0,0,0,750.5572809000084, 347.8309573927754,z",o=[g.path(e).attr({stroke:"none"}),g.path(n).attr({stroke:"none"}),g.path(r).attr({stroke:"none"})],i=document.createElementNS(A,"clipPath");i.setAttribute("id","clip_ring"+t),i.appendChild(o[t].node),g.canvas.appendChild(i),a.forEach(function(a,r){var n=w*r;a.rotate(n,800,500),a.node.setAttribute("clip-path","url(#clip_ring"+t+")"),a.node.style.cursor="pointer",a.attr({opacity:0}),h(a,w,r)})}function h(t,a,r){t.attr({transform:"r"+a*r+",800,500t0,140"})}function l(){var t=[];o[o.length-(r+1)].forEach(function(a){var r=g.image(a.url,a.x,a.y,a.width,a.height).attr({opacity:1});r.node.classList.add("svg_group_addtion"),t.push(r)});var a;switch(r){case 2:a=300;break;case 1:a=230;break;case 0:a=160}var i=(a-100)/a;i=(100*i|0)/100;var c=g.circle(800,500,a).attr({fill:"#000",stroke:"none"});c.node.style.transform="scale("+i+","+i+")",g.group([t[0]].concat(v,c,t[1]),"svg_group_"+r),s(r,v),e.push(v),2==r?g.wheel(340,n.slice(17,27),1,n,e,o):1==r?g.wheel(240,n.slice(34,44),0,n,e,o):(u(),$(document).trigger("wheel/show"))}function u(){var t=36,a=e[2],r=a.length;a.forEach(function(n,e){e==r-1?n.attr({opacity:1}).animate({transform:"r"+t*e+",800,500t0,0"},1e3,"<>",function(){f(),a.forEach(function(a,r){a.animate({transform:"r"+(360+t*r)+",800,500"},3e4)})}):n.attr({opacity:1}).animate({transform:"r"+t*e+",800,500t0,0"},1e3,"<>",function(){})})}function f(){var t=36,a=e[1],r=a.length;a.forEach(function(n,e){n.attr({opacity:1}).animate({transform:"r"+t*e+",800,500t0,0"},1e3,"<>",function(){e==r-1&&(p(),a.forEach(function(a,r){a.animate({transform:"r"+(-360+t*r)+",800,500"},3e4)}))})})}function p(){var t=e[0],a=t.length,r=36;t.forEach(function(n,e){n.attr({opacity:1}).animate({transform:"r"+r*e+",800,500t0,0"},1e3,"<",function(){e==a-1&&t.forEach(function(t,a){t.animate({transform:"r"+(360+r*a)+",800,500"},3e4)})})})}var g=this,d=a.length,m=0,v=[],w=360/d,y=340-70*r,A="http://www.w3.org/2000/svg",E=210,L=100;a.forEach(function(t){var a=new Image;a.onload=i,a.onerror=c,a.src=t.thumb,a.id=t.url,a.title=t.title,a.author=t.author})};